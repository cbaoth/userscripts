= My Userscripts & Co.
Andreas Weyer <dev@cbaoth.de>
v1.0, 2018-11-28
:toc:
:toc-placement: auto
:toclevels: 3
//:sectnums:
//:sectnumlevels: 3
:source-highlighter: prettify
//:source-highlighter: highlight.js
:imagesdir: ./adoc_assets
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]


== User Scripts

My browser user scripts.

To run them install link:https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo[Tampermonkey] (link:https://www.google.com/chrome/[Chrome]), link:https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/[Greasemonkey] (link:https://www.mozilla.org/en-US/firefox/developer/[Firefox]), or no extension at all (link:https://vivaldi.com/[Vivaldi]) and click on the linked `*.user.js` file, then click on "Raw" to install the script. Note that, except when using the integrated Vivaldi solution, the user scripts will be **updated automatically** _(default settings)_ as soon as I commit a new version.

=== Amazon Links

`link:amazon-links.user.js[]` adds a direct product link _(no unnecessary parameters like referrer, affiliations, etc.)_ and a https://keepa.com[keepa] price history link to amazon search and product pages.

* Product page
** Makes the price a link to the product's _keepa_ price history page.
** Adds a direct amazon product link _(amazon icon)_ next to the price.
 +
image:amazon-links1.png[]
* Search page
** Replaces search result price links with links to the product's _keepa_ price history page.
** Replaces search result product links with clean ones.


=== Auto Show Forum Spoilers

`link:auto-show-forum-spoilers.user.js[]` automatically toggles spoilers in forum posts.


=== Copy URL on Hover

`link:copy-url-on-hover.user.js[]` copies link/media URIs to the clipboard on mouse hover.

* Copies link URI into clipboard when hovering over a link while holding `Alt-C`.
* Tries to copy media (image/video) URI into clipboard when hovering over an image while holding `Alt-B`.
* Shows a brief tooltip indicating that the clipboard was updated:

image:copy-on-hover-link1.png[,75%]

image:copy-on-hover-media1.png[]


=== Gerrit Tweaks

`link:gerrit-tweaks.user.js[]` improves https://www.gerritcodereview.com/[gerrit code review]:

* Adds additional syntax highlighting for:
** Exit keybords `return` and `throw`
** Static method calls of Google Guava https://github.com/google/guava/wiki/PreconditionsExplained[Preconditions] (potential exits) +
image:gerrit-tweaks-code1.png[]


=== IMDB Tweaks

`link:imdb-tweaks.user.js[]` improves https://www.imdb.com/[imdb]:

* Enforces a dark background _(a good idea with or without using https://chrome.google.com/webstore/detail/dark-reader/eimadpbcbfnmbkopoojfekhnkhdbieeh[Dark Reader])_
* Adds new key bindings:

[cols="1,3",options="header"]
|=======
| Keys         | Action
| Alt-F12      | Open script configuration
|=======

==== Episode List

* Adds direct season links to episode list _(top & bottom)_: +
image:imdb-tweaks-seasons1.png[]
* Makes the list more compact _(default, configurable)_, adds hotkey `d` to toggle details: +
image:imdb-tweaks-season-list-details.gif[]
* Adds average season ratings _(all users and own, faded in case of missing ratings)_: +
image:imdb-tweaks-seasons-rating1.png[,40%]
* Adds episode number to episode titles.
* Changes own rating star colors
** 1-4 -> red _(slightly transparent in list)_
** 5-6 -> purple
** 7 -> blue _(average IMDB rating, regular star color)_
** 8-9 -> red
** 10 -> red _(larger star)_
* Adds new key bindings:

[cols="1,3",options="header"]
|=======
| Keys         | Action
| d            | Toggle compact list mode
|=======

=== Jenkins Tweaks

`link:jenkins-tweaks.user.js[]` improves https://jenkins.io/[Jenkins]:

* Highlights errors, exceptions, warnings, success, test issues etc. in:
** Job console output
** Blue Ocean pipeline and test output +
image:jenkins-console1.png[]


=== OpenProject Tweaks

`link:openproject-tweaks.user.js[]` improves OpenProjects by adding thinks like:

* Highlights the user's own name (automatically detected).
* Highlights issue priority, status, and type (tracker).
* Highlights _[tags]_ and \*bold* in issue subjects.
* Allows adding of additoinal custom styles _(substitute text fragments via generic regex search mechanism)_.


=== Streaming Tweaks

`link:streaming-tweaks.user.js[]` improves the user experience of some streaming services.

==== Netflix

Improvements to the https://netflix.com[Netflix] web player:

* Automatically skips the intro _(where supported)_.
* Automatically skips to the next episode _(in closing credits view)_.
* Adds new key bindings:

[cols="1,3",options="header"]
|=======
| Keys         | Action
| Shift-Right  | Fast-forward 1min
| Shift-Left   | Rewind 1min
| Ctrl-Right   | Fast-forward 10min
| Ctrl-Left    | Rewind 10min
| . _(period)_ | Next episode
|=======

==== Amazon prime video

Improvements to Amazon's https://www.primevideo.com/:[prime video] web player:

* Automatically skips the intro _(where supported)_.
* Automatically skips to the next episode _(in closing credits view)_.
* Automatically skips ads / trailers _(upfront & between episodes)_.
* Adds new key bindings:

[cols="1,3",options="header"]
|=======
| Keys         | Action
| Shift-Right  | Fast-forward 1min
| Shift-Left   | Rewind 1min
| Ctrl-Right   | Fast-forward 10min
| Ctrl-Left    | Rewind 10min
| . _(period)_ | Next episode
|=======

_Note: If this doesn't work please check the include. Script is currently only in case URL matches `/^https?://(www|smile)\.amazon\.(de|com)/gp/video/`. Depending on how you reach the player, the `/gp/video/` might be missing in the URL._

==== YouTube

Improvements to https://www.youtube.com:[YouTube]:

* Adds new key bindings:

[cols="1,3",options="header"]
|=======
| Keys         | Action
| Shift-Right  | Fast-forward 1min
| Shift-Left   | Rewind 1min
| Ctrl-Right   | Fast-forward 10min
| Ctrl-Left    | Rewind 10min
| . _(period)_ | Next video
| , _(comma)_  | Previous video _(playlist only)_
| ]            | Increase playback rate (down to 2x)
| [            | Decrease playback rate (up to 0.25x)
| =            | Default playback rate (1x)
|=======


==== Spotify

Improvements to https://open.spotify.com:[Spotify]:

* Adds new key bindings:

[cols="1,3",options="header"]
|=======
| Keys         | Action
| . _(period)_ | Next track
| , _(comma)_  | Previous track _(if any)_
| r            | Switch Repeat Mode [All, Single, Off] _(playlist only)_
| s            | Toggle Shuffle _(playlist only)_
| /            | Open search
|=======


=== TradingView

Improvements to https://tradingview.com:[TradingView]:

* Adds new key bindings:

[cols="1,3",options="header"]
|=======
| Keys         | Action
| Alt-1 to 0   | Click favorite quick access timeframe buttons 1 to 10
| Alt-f        | Toggle footer pane (_Pine Editor_, _Strategy Tester_, etc.)
| Alt-Shift-f  | Toggle footer pane maximization
| Alt-w        | Toggle _Watch List_ (right pane)
|=======


== Libs & Resources

Common libs and resources used in some of the of my scripts.

[cols="1,3",options="header"]
|=======
| File | Description
|`link:lib/cblib.js[]`  | Some common JS used in my user scripts.
|`link:lib/cblib.css[]` | Some common CSS used in my user scripts.
|`link:dev/[]` | Just some code snippets, notes, etc. that can be helpful while developing user scripts.
|=======


== Q & A

* Q: Why are the hotkeys (sometimes) not working as expected?
** A: Most of these scripts disable hotkeys while an input field is in focus _(e.g. cursor in YouTube search field while playing video)_ to prevent accidental hotkey execution while typing. Check if this is the case _(e.g. click onto the player first to focus it)_.
